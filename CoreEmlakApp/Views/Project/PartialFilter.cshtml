
<div class="search-form">
    <h4><span class="glyphicon glyphicon-search"></span> Search for</h4>


    <form  asp-controller="Project" asp-action="Filter" method="get">
        <div class="row">
            <div class="col-lg-12">
                <div class="form-group">
                    <input type="text" class="form-control" name="SearchString" placeholder="Search of Properties" value="@ViewData["CurrentFilter"]" />
                </div>

            </div>

        </div>
        
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <input type="text" class="form-control" name="min" placeholder="min" />
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <input type="text" class="form-control" name="max" placeholder="max" />
                </div>
            </div>

        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <select name="CityId" id="CityId" class="form-control">
                        <option value="0" selected="City"></option>
                        @foreach (var item in ViewBag.cityList)
                        {
                            <option value="@item.Value">@item.Text</option>
                        }
                    </select>
                </div>

            </div>
            <div class="col-lg-6">
                <select name="DistrictId" id="DistrictId" class="form-control">
                    <option value="0" selected="District"></option>
                    <option value="DistrictId"></option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div class="form-group">
                    <select name="NeighbourhoodId" id="NeighbourhoodId" class="form-control">
                        <option value="0" selected="NeighbourhoodId"></option>

                    </select>
                </div>

            </div>

        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <select name="CategoryId" id="CategoryId" class="form-control">
                        <option value="0" selected="Category"></option>
                        @foreach (var item in ViewBag.category)
                        {
                            <option value="@item.Value">@item.Text</option>
                        }
                    </select>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <select name="TypeId" id="TypeId" class="form-control">
                        <option value="0" selected="Type"></option>
                        <option value="0" selected="TypeId"></option>
                    </select>
                </div>
            </div>

        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="form-group">
                    <select name="SituationId" id="SituationId" class="form-control">
                        <option value="0" selected="Sitution"></option>
                        @foreach (var item in ViewBag.situation)
                        {
                            <option value="@item.Value">@item.Text</option>
                        }
                    </select>

                </div>

            </div>

        </div>
        <div class="form-group mb-0">
            <button type="submit" class="btn btn-primary">Find Now</button>
        </div>
    </form>


</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#CityId').change(function () {
            var cityId = $(this).val();
            debugger

            $.ajax({
                type="Post",
                url="/User/Advert/DistrictGet?CityId=" + cityId,
                contentType="html",
                success: function (response) {
                    debugger
                    $("#DistrictId").empty();
                    $("#DistrictId").append(response);

                }

            })
        })
        $('#CategoryId').change(function () {
            $('#TypeId').empty();
            var categoryId = $(this).val();
            debugger

            $.ajax({
                type="GET",
                url="/User/Advert/TypeGet?CategoryId=" + 1,
                //url= '@Url.Action("TypeGet")',
                dataType: 'json',
                // data: { CategoryId: categoryId },

                success: function (response) {
                    debugger
                    $("#TypeId").append('<option value="' + -1 + '">' +
                        "Select" + '</option>');

                    $.each(response, function (type) {
                        $("#TypeId").append('<option value="' + type.value + '">' +
                            type.text + '</option>');
                    });


                }


            });
        });
        $('#DistrictId').change(function () {
            var districtId = $(this).val();
            debugger
            $.ajax({
                type="Post",
                url="/User/Advert/NeighbourhoodGet?DistrictId=" + districtId,
                contentType="html",
                success: function (response) {
                    debugger
                    $("#NeighbourhoodId").empty();
                    $("#NeighbourhoodId").append(response);

                }

            })
        })
    });
</script>
